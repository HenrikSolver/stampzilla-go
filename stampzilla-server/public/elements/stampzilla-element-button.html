<link rel="import" href="/bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="/bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="/bower_components/core-animated-pages/transitions/slide-down.html">
<link rel="import" href="/bower_components/core-animated-pages/transitions/slide-up.html">
<link rel="import" href="/bower_components/core-animated-pages/transitions/slide-from-right.html">
<link rel="import" href="/bower_components/font-roboto/roboto.html">
<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/core-scaffold/core-scaffold.html">
<link rel="import" href="/bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="/bower_components/core-menu/core-menu.html">
<link rel="import" href="/bower_components/core-item/core-item.html">
<link rel="import" href="/bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="/bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="/bower_components/core-menu/core-submenu.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">

<polymer-element name="stampzilla-element-button" attributes="device element1 wsSend" >
	<template>
		<!--<link rel="stylesheet" href="stampzilla-default-elements.css">-->
		<style>

			paper-button.colored {
				color: #4285f4;
			}

			paper-button[raised].colored {
				background: #4285f4;
				color: #fff;
			}

		</style>

		<div>SWITCH - {{element1.Name}}</div>
		<paper-button on-tap="{{runCommand}}" raised="" class="{{buttonClass}}" role="button" tabindex="0" >{{element1.Name}}</paper-button>

	</template>
	<script>
		/* jshint newcap: false */
		/*global Polymer */


		(function() {
			"use strict";

			Polymer('stampzilla-element-button', {
				element: {},
				device: {},
				buttonClass: "colored",
				deviceChanged: function(){
					if( this.device.State === undefined){
						return;
					}
					try{
						this.state = eval("this.device.State."+this.element1.Feedback);

					}catch(e){
						if(e.message === 'Cannot read property \'State\' of undefined'){
							return;
						}
						console.log(e);
					}

					if(this.state){
						this.buttonClass = "colored";
						return;
					}
					this.buttonClass = "";
				},
                runCommand: function() {
					var cmd = {
						type:'cmd',
						to:this.device.Uuid,
						data:this.element1.Command
					};
					this.wsSend = cmd;
                },

				ready: function(){

                }
			});

		})();
	</script>
</polymer-element>
